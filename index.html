<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>2026 Pro Planner • Final Edition</title>
  <style>
    body { font-family: -apple-system, sans-serif; background: #f0f2f5; padding: 20px; transition: transform 0.2s ease-in-out; transform-origin: top left; }
    
    .header-area { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; position: sticky; left: 0; z-index: 1000; }
    h1 { margin: 0; font-weight: 800; color: #111827; }
    .zoom-controls { display: flex; gap: 15px; background: white; padding: 10px 20px; border-radius: 8px; border: 1px solid #ccc; box-shadow: 0 2px 4px rgba(0,0,0,0.05); align-items: center; }
    .zoom-slider { cursor: pointer; width: 400px; }

    .planner-container { display: flex; flex-direction: column; gap: 4px; min-width: max-content; }
    .month-row { display: flex; }
    
    /* Frozen Column */
    .month-label { 
      width: 60px; height: 130px; display: flex; align-items: center; justify-content: center; 
      background: #ddd; font-size: 11px; font-weight: bold; writing-mode: vertical-rl; 
      transform: rotate(180deg); border: 1px solid #ccc; 
      position: sticky; left: 0; z-index: 500; 
    }
    
    .calendar-grid { display: flex; gap: 2px; background: #ccc; padding: 2px; border: 1px solid #ccc; }
    .day-box { width: 110px; height: 130px; background: white; padding: 4px; display: flex; flex-direction: column; position: relative; box-sizing: border-box; }
    
    /* Hover Preview during spanning */
    .day-box.span-preview { background-color: #fffbeb !important; border: 1px solid #fde68a; }

    .day-box.is-today { outline: 4px solid #fcd34d; outline-offset: -1px; z-index: 10; background-color: #fffef2; }
    .day-box.weekend { background: #e5e7eb; } 
    .day-box.holiday-ph { background: #e0f2fe; } 
    .day-box.holiday-au { background: #fef9c3; } 
    .day-box.holiday-both { background: #dcfce7; } 
    .day-box.holiday-personal { background: #fee2e2; } 
    
    .day-num { font-size: 10px; font-weight: bold; color: #4b5563; margin-bottom: 2px; }
    .holiday-label { font-size: 9px; font-style: italic; color: #ef4444; margin-bottom: 4px; line-height: 1; }
    
    .event-bar { height: 26px; font-size: 11px; color: white; margin-bottom: 2px; border-radius: 4px; display: flex; align-items: center; padding: 0 6px; cursor: pointer; position: relative; font-weight: 600; box-sizing: border-box; }
    .active-event { outline: 4px solid #facc15; outline-offset: -1px; z-index: 100 !important; box-shadow: 0 0 10px rgba(0,0,0,0.3); }
    
    .floating-menu { position: absolute; top: -45px; left: 0; background: white; border: 1px solid #ccc; border-radius: 8px; padding: 5px; display: flex; gap: 5px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 200; align-items: center; }
    .color-dot { width: 15px; height: 15px; border-radius: 50%; cursor: pointer; border: 1px solid #ddd; }
    .menu-del { background: #ef4444; color: white; border: none; border-radius: 4px; padding: 2px 8px; cursor: pointer; font-size: 10px; font-weight: bold; }
    
    .event-text { flex-grow: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .day-input { width: 100%; border: none; border-top: 1px solid #ccc; margin-top: auto; font-size: 10px; padding: 4px 0; outline: none; background: transparent; }
    
    .span-start { border-top-right-radius: 0; border-bottom-right-radius: 0; margin-right: -4px; }
    .span-mid { border-radius: 0; margin-left: -4px; margin-right: -4px; }
    .span-end { border-top-left-radius: 0; border-bottom-left-radius: 0; margin-left: -4px; }

    .footnote { margin-top: 40px; padding: 20px; background: white; border-radius: 8px; border: 1px solid #ccc; max-width: 800px; position: sticky; left: 0; }
    .footnote h3 { margin-top: 0; font-size: 16px; font-weight: bold; }
    .footnote ul { font-size: 13px; color: #4b5563; line-height: 1.8; list-style-type: disc; padding-left: 20px; }
  </style>
</head>
<body>

  <div class="header-area">
    <h1>2026 Pro Planner</h1>
    <div class="zoom-controls">
      <label>Zoom Scroll:</label>
      <input type="range" id="zoomSlider" class="zoom-slider" min="0.2" max="2.0" step="0.05" value="1.0" oninput="updateZoom(this.value)">
      <button class="menu-del" style="background:#4b5563" onclick="resetZoom()">Reset</button>
    </div>
  </div>

  <div id="planner" class="planner-container"></div>

  <div class="footnote">
    <h3>Instructions & User Guide</h3>
    <ul>
      <li><strong>Create Event:</strong> Type in the "+" box and press Enter.</li>
      <li><strong>Highlight & Span:</strong> Click an event once (yellow border), then click any day box to stretch it across dates.</li>
      <li><strong>Hover Details:</strong> Hover over any event for 2 seconds to see its full name (helpful for long names).</li>
      <li><strong>Scroll:</strong> The month labels on the left are frozen; they will stay visible as you scroll right.</li>
      <li><strong>Zoom:</strong> Use the long slider at the top to zoom far in or out.</li>
      <li><strong>Holidays:</strong> <span style="background:#e0f2fe; padding: 2px;">PH (Blue)</span>, <span style="background:#fef9c3; padding: 2px;">AU (Yellow)</span>, <span style="background:#dcfce7; padding: 2px;">Both (Green)</span>, <span style="background:#fee2e2; padding: 2px;">Birthdays (Red)</span>.</li>
    </ul>
  </div>

  <script>
    const YEAR = 2026;
    const STORAGE_KEY = "planner_v2026_final_ultimate";
    const COLORS = ["#ef4444", "#8b5cf6", "#3b82f6", "#10b981", "#f59e0b"]; 
    const MONTHS = ["January","February","March","April","May","June","July","August","September","October","November","December"];
    const WEEKDAYS = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    
    const HOLIDAYS = {
      "2026-01-01": { name: "New Year’s Day", ph: true, au: true },
      "2026-01-25": { name: "Peter Kramer Birthday", pers: true },
      "2026-01-26": { name: "Australia Day", au: true },
      "2026-02-13": { name: "Daddy Lim Birthday", pers: true },
      "2026-02-17": { name: "Chinese New Year", ph: true },
      "2026-02-25": { name: "EDSA Anniversary", ph: true },
      "2026-03-09": { name: "Labor Day (AU)", au: true },
      "2026-04-02": { name: "Maundy Thursday", ph: true },
      "2026-04-03": { name: "Good Friday", au: true },
      "2026-04-04": { name: "Holy Saturday", ph: true, au: true },
      "2026-04-06": { name: "Easter Monday", au: true },
      "2026-04-09": { name: "Araw ng Kagitingan", ph: true },
      "2026-04-23": { name: "Mommy Mallillin Birthday", pers: true },
      "2026-04-25": { name: "ANZAC Day", au: true },
      "2026-05-01": { name: "Labor Day (PH)", ph: true },
      "2026-05-20": { name: "Tiffany Mallillin Birthday", pers: true },
      "2026-05-26": { name: "Fritz Lim Birthday", pers: true },
      "2026-06-09": { name: "Bebeboy Birthday", pers: true },
      "2026-06-12": { name: "Independence Day (PH)", ph: true },
      "2026-06-24": { name: "Achi Lim Birthday", pers: true },
      "2026-08-21": { name: "Ninoy Aquino Day", ph: true },
      "2026-08-25": { name: "Bebegirl Birthday", pers: true },
      "2026-08-31": { name: "National Heroes Day", ph: true },
      "2026-10-05": { name: "Mommy Lim Birthday", pers: true },
      "2026-10-10": { name: "Frankie Lim Birthday", pers: true },
      "2026-11-01": { name: "All Saints Day", ph: true },
      "2026-11-02": { name: "All Souls Day", ph: true },
      "2026-11-20": { name: "Lucie Lim Birthday", pers: true },
      "2026-11-30": { name: "Bonifacio Day", ph: true },
      "2026-12-08": { name: "Immaculate Conception", ph: true },
      "2026-12-10": { name: "Lloyd Go Birthday", pers: true },
      "2026-12-24": { name: "Christmas Eve", ph: true, au: true },
      "2026-12-25": { name: "Christmas Day", ph: true, au: true },
      "2026-12-27": { name: "Daddy Mallillin Birthday", pers: true },
      "2026-12-28": { name: "Boxing Day (Observed)", au: true },
      "2026-12-30": { name: "Rizal Day", ph: true },
      "2026-12-31": { name: "New Year's Eve", ph: true, au: true }
    };

    let events = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    let selectedId = null;

    function updateZoom(val) { document.body.style.transform = `scale(${val})`; }
    function resetZoom() { document.getElementById('zoomSlider').value = 1.0; updateZoom(1.0); }
    function save() { localStorage.setItem(STORAGE_KEY, JSON.stringify(events)); }

    function getLocalTodayKey() {
        const d = new Date();
        return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
    }

    function render() {
      const container = document.getElementById('planner');
      container.innerHTML = '';
      const todayKey = getLocalTodayKey();

      MONTHS.forEach((monthName, mIndex) => {
        const row = document.createElement('div');
        row.className = 'month-row';
        const label = document.createElement('div');
        label.className = 'month-label';
        label.innerText = monthName;
        row.appendChild(label);

        const grid = document.createElement('div');
        grid.className = 'calendar-grid';

        const daysInMonth = new Date(YEAR, mIndex + 1, 0).getDate();
        for (let d = 1; d <= 31; d++) {
          const dayBox = document.createElement('div');
          dayBox.className = 'day-box';
          const dateKey = `${YEAR}-${String(mIndex+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;

          if (d > daysInMonth) {
            dayBox.style.background = '#ddd';
            grid.appendChild(dayBox);
            continue;
          }

          if (dateKey === todayKey) dayBox.classList.add('is-today');
          const dateObj = new Date(YEAR, mIndex, d);
          if (dateObj.getDay() === 0 || dateObj.getDay() === 6) dayBox.classList.add('weekend');

          const hol = HOLIDAYS[dateKey];
          if (hol) {
            if (hol.pers) dayBox.classList.add('holiday-personal');
            else if (hol.ph && hol.au) dayBox.classList.add('holiday-both');
            else if (hol.ph) dayBox.classList.add('holiday-ph');
            else if (hol.au) dayBox.classList.add('holiday-au');
          }

          const num = document.createElement('div');
          num.className = 'day-num';
          num.innerText = `${d} ${WEEKDAYS[dateObj.getDay()]}`;
          dayBox.appendChild(num);

          if (hol) {
            const hLabel = document.createElement('div');
            hLabel.className = 'holiday-label';
            hLabel.innerText = hol.name;
            dayBox.appendChild(hLabel);
          }

          const dayEvents = events.filter(e => dateKey >= e.start && dateKey <= e.end);
          dayEvents.forEach(ev => {
            const isSelected = ev.id === selectedId;
            const bar = document.createElement('div');
            bar.className = 'event-bar';
            bar.style.backgroundColor = ev.color;
            bar.title = ev.text;
            if (isSelected) bar.classList.add('active-event');

            const isStart = dateKey === ev.start;
            const isEnd = dateKey === ev.end;
            if (isStart && !isEnd) bar.classList.add('span-start');
            else if (!isStart && isEnd) bar.classList.add('span-end');
            else if (!isStart && !isEnd) bar.classList.add('span-mid');

            const textSpan = document.createElement('span');
            textSpan.className = 'event-text';
            textSpan.innerText = isStart ? ev.text : "";
            bar.appendChild(textSpan);

            if (isSelected && isStart) {
                const menu = document.createElement('div');
                menu.className = 'floating-menu';
                COLORS.forEach(c => {
                    const dot = document.createElement('div');
                    dot.className = 'color-dot';
                    dot.style.backgroundColor = c;
                    dot.onclick = (e) => { e.stopPropagation(); ev.color = c; save(); render(); };
                    menu.appendChild(dot);
                });
                const del = document.createElement('button');
                del.className = 'menu-del';
                del.innerText = 'X';
                del.onclick = (e) => { e.stopPropagation(); events = events.filter(i => i.id !== ev.id); selectedId = null; save(); render(); };
                menu.appendChild(del);
                bar.appendChild(menu);
            }

            bar.onclick = (e) => {
              e.stopPropagation();
              if (selectedId === ev.id) {
                const newText = prompt("Rename event:", ev.text);
                if (newText) ev.text = newText;
                selectedId = null;
              } else {
                selectedId = ev.id;
              }
              save(); render();
            };
            dayBox.appendChild(bar);
          });

          // SPAN PREVIEW LOGIC
          dayBox.onmouseenter = () => {
            if (selectedId) {
              const ev = events.find(e => e.id === selectedId);
              const start = ev.start;
              const end = dateKey;
              const lower = start < end ? start : end;
              const upper = start > end ? start : end;
              
              document.querySelectorAll('.day-box').forEach(box => {
                const boxDate = box.dataset.date;
                if (boxDate >= lower && boxDate <= upper) {
                    box.classList.add('span-preview');
                } else {
                    box.classList.remove('span-preview');
                }
              });
            }
          };

          dayBox.dataset.date = dateKey; // Needed for preview logic
          dayBox.onclick = () => {
            if (selectedId) {
              const ev = events.find(e => e.id === selectedId);
              if (dateKey < ev.start) {
                  ev.start = dateKey;
              } else {
                  ev.end = dateKey;
              }
              selectedId = null;
              save(); render();
            }
          };

          const input = document.createElement('input');
          input.className = 'day-input';
          input.placeholder = '+ Add';
          input.onkeydown = (e) => {
            if (e.key === 'Enter' && input.value) {
              events.push({ id: Date.now().toString(), text: input.value, start: dateKey, end: dateKey, color: COLORS[Math.floor(Math.random()*5)] });
              save(); render();
            }
          };
          dayBox.appendChild(input);
          grid.appendChild(dayBox);
        }
        row.appendChild(grid);
        container.appendChild(row);
      });
    }
    render();
  </script>
</body>
</html>
